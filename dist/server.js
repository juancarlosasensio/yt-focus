(()=>{"use strict";var e={n:t=>{var n=t&&t.__esModule?()=>t.default:()=>t;return e.d(n,{a:n}),n},d:(t,n)=>{for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const t=require("express");var n=e.n(t);const r=require("cors");var a=e.n(r);const o=require("serialize-javascript");var c=e.n(o);const s=require("react-dom/server");var i=e.n(s);const l=require("react");function u(e){var t=e.data;return l.createElement("ul",{className:"grid"},t.map((function(e,t){var n=e.name,r=e.owner,a=e.stargazers_count,o=e.html_url;return l.createElement("li",{key:n},l.createElement("h2",null,"#",t+1),l.createElement("h3",null,l.createElement("a",{href:o},n)),l.createElement("p",null,"by",l.createElement("a",{href:"https://github.com/".concat(r.login)},"@",r.login)),l.createElement("p",null,a.toLocaleString()," stars"))})))}function d(e){var t=e.serverData;return l.createElement("div",null,l.createElement(u,{data:t}))}const h=require("isomorphic-fetch");var p=e.n(h),m=n()();m.use(a()()),m.use(n().static("dist")),m.get("*",(function(e,t,n){(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"all",t="https://api.github.com/search/repositories?q=stars:>1+language:".concat(e,"&sort=stars&order=desc&type=Repositories");return p()(t).then((function(e){return e.json()})).then((function(e){return e.items})).catch((function(e){return console.warn(e),null}))})().then((function(e){console.log("fetchPopularRepos worked?",e||"nope");var n=i().renderToString(l.createElement(d,{serverData:e}));t.send('\n        <!DOCTYPE html>\n        <html>\n          <head>\n            <title>SSR with React Router</title>\n            <script src="/bundle.js" defer><\/script>\n            <link href="/main.css" rel="stylesheet">\n            <script>\n              window.__INITIAL_DATA__ = '.concat(c()(e),'\n            <\/script>\n          </head>\n\n          <body>\n            <div id="app">').concat(n,"</div>\n          </body>\n        </html>\n      "))}))}));var v=process.env.PORT||3e3;m.listen(v,(function(){console.log("Server is listening on port: ".concat(v))}))})();